function configureEditIntro(a,b,c){a.setOptions({nextLabel:b[c.indexOf("nextstep")],prevLabel:b[c.indexOf("prevstep")],skipLabel:b[c.indexOf("skiptutorial")],doneLabel:b[c.indexOf("donetutorial")],steps:[{element:"#treasurehunt-editor",intro:b[c.indexOf("welcome_edit_tour")],position:"floating"},{element:"#mapedit",intro:b[c.indexOf("map_tour")],position:"floating"},{element:"#roadlist",intro:b[c.indexOf("roads_tour")],position:"top"},{element:"#stagelistpanel",intro:b[c.indexOf("stages_tour")],position:"right"},{element:"#addroad",intro:b[c.indexOf("addroad_tour")],position:"bottom"},{element:"#addstage",intro:b[c.indexOf("addstage_tour")],position:"bottom"},{element:"#savestage",intro:b[c.indexOf("save_tour")],position:"bottom"},{element:"#treasurehunt-editor",intro:b[c.indexOf("editend_tour")],position:"floating"}]}),a.oncomplete(function(a){document.cookie="introEditProgress = Done"}),a.onchange(function(a){document.cookie="introEditStep = "+a.name})}function configurePlayIntro(a,b,c){a.setOptions({nextLabel:strings[c.indexOf("nextstep")],prevLabel:strings[c.indexOf("prevstep")],skipLabel:strings[c.indexOf("skiptutorial")],doneLabel:strings[c.indexOf("donetutorial")],steps:[{intro:strings[c.indexOf("welcome_play_tour")],position:"floating"},{element:"#collapsibleset",intro:strings[c.indexOf("lastsuccessfulstage_tour")],position:"top"},{element:"#mapplay",intro:strings[c.indexOf("mapplay_tour")],position:"floating"},{element:"#validatelocation",intro:strings[c.indexOf("validatelocation_tour")],position:"top"},{element:"#autolocate",intro:strings[c.indexOf("autolocate_tour")],position:"top"},{element:"#treasurehunt-editor",intro:strings[c.indexOf("playend_tour")],position:"floating"}]}),a.oncomplete(function(a){document.cookie="introPlayProgress = Done"}),a.onchange(function(a){document.cookie="introPlayStep = "+this._currentStep}),a.onafterchange(function(a){for(var b=a.parentElement;null!=b;){if("panel"==b.dataset.role){b.style="z-index: 1001 !important";break}b=b.parentElement}})}define(["jquery","jqueryui","mod_treasurehunt/intro","core/str","core/notification"],function(a,b,c,d,e){var f={editpage:function(){var a=c(),b={};if(document.cookie.split(";").forEach(function(a){var c=a.split("=");c[1]&&(b[c[0].trim()]=c[1].trim())}),"Done"!=b.introEditProgress){var f=["nextstep","prevstep","skiptutorial","donetutorial","welcome_edit_tour","map_tour","mapplay_tour","roads_tour","stages_tour","addroad_tour","addstage_tour","save_tour","editend_tour"],g=f.map(function(a){return{key:a,component:"treasurehunt"}});d.get_strings(g).done(function(b){configureEditIntro(a,b,f),setTimeout(function(){a.start()},1e3)}).fail(e.exception)}},playpage:function(a){var b=c(),f={};if(document.cookie.split(";").forEach(function(a){var b=a.split("=");b[1]&&(f[b[0].trim()]=b[1].trim())}),"Done"!=f.introPlayProgress){var g=["nextstep","prevstep","skiptutorial","donetutorial","welcome_play_tour","lastsuccessfulstage_tour","mapplay_tour","validatelocation_tour","autolocate_tour","playend_tour"],h=g.map(function(a){return{key:a,component:"treasurehunt"}});d.get_strings(h).done(function(a){configurePlayIntro(b,a,g),setTimeout(function(){b.start()},1e3)}).fail(e.exception)}}};return f});