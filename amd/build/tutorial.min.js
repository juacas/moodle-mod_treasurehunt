/**
 * @module    mod_treasurehunt/tutorial
 * @package   mod_treasurehunt
 * @copyright 2016 onwards Juan Pablo de Castro <jpdecastro@tel.uva.es>
 * @author Juan Pablo de Castro <jpdecastro@tel.uva.es>
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
function configureEditIntro(t,e,o){t.setOptions({nextLabel:e[o.indexOf("nextstep")],prevLabel:e[o.indexOf("prevstep")],skipLabel:e[o.indexOf("skiptutorial")],doneLabel:e[o.indexOf("donetutorial")],steps:[{element:"#treasurehunt-editor",intro:e[o.indexOf("welcome_edit_tour")],position:"floating"},{element:"#mapedit",intro:e[o.indexOf("map_tour")],position:"floating"},{element:"#roadlist",intro:e[o.indexOf("roads_tour")],position:"top"},{element:"#stagelistpanel",intro:e[o.indexOf("stages_tour")],position:"right"},{element:"#addroad",intro:e[o.indexOf("addroad_tour")],position:"bottom"},{element:"#addstage",intro:e[o.indexOf("addstage_tour")],position:"bottom"},{element:"#savestage",intro:e[o.indexOf("save_tour")],position:"bottom"},{element:"#treasurehunt-editor",intro:e[o.indexOf("editend_tour")],position:"floating"}]}),t.onexit((function(t){document.cookie="introEditProgress = Done"})),t.oncomplete((function(t){document.cookie="introEditProgress = Done"})),t.onchange((function(t){document.cookie="introEditStep = "+t.name,document.cookie="introEditProgress = Done"}))}function configurePlayIntro(t,e,o){t.setOptions({nextLabel:e[o.indexOf("nextstep")],prevLabel:e[o.indexOf("prevstep")],skipLabel:e[o.indexOf("skiptutorial")],doneLabel:e[o.indexOf("donetutorial")],steps:[{intro:e[o.indexOf("welcome_play_tour")],position:"floating"},{element:"#bigbtn",intro:e[o.indexOf("bigbutton_play_tour")],position:"top"},{element:"#validatelocation",intro:e[o.indexOf("validatelocation_tour")],position:"top"},{element:"#mapplay",intro:e[o.indexOf("mapplay_tour")],position:"floating"},{element:"#autolocate",intro:e[o.indexOf("autolocate_tour")],position:"top"},{element:"#playerhelp",intro:e[o.indexOf("playerhelp_tour")],position:"bottom"},{element:"#treasurehunt-editor",intro:e[o.indexOf("playend_tour")],position:"floating"}]}),t.onexit((function(t){$("#bigbtn").click()})),t.oncomplete((function(t){})),t.onchange((function(t){document.cookie="introPlayStep = "+this._currentStep})),t.onafterchange((function(t){for(var e=t.parentElement;null!==e;){if("panel"==e.dataset.role){e.style="z-index: 1001 !important";break}e=e.parentElement}}))}define(["jquery","jqueryui","mod_treasurehunt/intro","core/str","core/notification"],(function(t,e,o,n,i){return{launchedittutorial:function(){var e=o(),r=["nextstep","prevstep","skiptutorial","donetutorial","welcome_edit_tour","map_tour","mapplay_tour","roads_tour","stages_tour","addroad_tour","addstage_tour","save_tour","editend_tour"],a=r.map((function(t){return{key:t,component:"treasurehunt"}}));t(".treasurehunt-editor-loader").show(),n.get_strings(a).done((function(o){t(".treasurehunt-editor-loader").hide(),configureEditIntro(e,o,r),e.start()})).fail(i.exception)},editpage:function(){var e={};t("#edition_maintitle > h2 > a").on("click",this.launchedittutorial),document.cookie.split(";").forEach((function(t){var o=t.split("=");o[1]&&(e[o[0].trim()]=o[1].trim())})),"Done"!=e.introEditProgress&&this.launchedittutorial()},launchplaytutorial:function(){var e=o(),r=["nextstep","prevstep","skiptutorial","donetutorial","welcome_play_tour","bigbutton_play_tour","mapplay_tour","validatelocation_tour","autolocate_tour","playerhelp_tour","playend_tour"],a=r.map((function(t){return{key:t,component:"treasurehunt"}}));t.mobile.loading("show"),n.get_strings(a).done((function(o){(async()=>{for(var t=0;t<o.length;t++)o[t]=await o[t]})().then(()=>{t.mobile.loading("hide"),configurePlayIntro(e,o,r),e.start()})})).fail(i.exception)},playpage:function(){var e={};t("#playerhelp").on("click",this.launchplaytutorial),document.cookie.split(";").forEach((function(t){var o=t.split("=");o[1]&&(e[o[0].trim()]=o[1].trim())})),this.launchplaytutorial()}}}));