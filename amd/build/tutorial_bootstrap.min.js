define("mod_treasurehunt/tutorial_bootstrap",["exports","jquery","mod_treasurehunt/intro","core/str","core/notification"],(function(_exports,_jquery,_intro,_str,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * @module    mod_treasurehunt/tutorial
   * @package
   * @copyright 2016 onwards Juan Pablo de Castro <jpdecastro@tel.uva.es>
   * @author Juan Pablo de Castro <jpdecastro@tel.uva.es>
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=_interopRequireDefault(_jquery),_intro=_interopRequireDefault(_intro),_notification=_interopRequireDefault(_notification);var _default={launchedittutorial:function(){let intro=(0,_intro.default)(),terms=["nextstep","prevstep","skiptutorial","donetutorial","welcome_edit_tour","map_tour","mapplay_tour","roads_tour","stages_tour","addroad_tour","addstage_tour","save_tour","editend_tour"],stringQueried=terms.map((term=>({key:term,component:"treasurehunt"})));(0,_jquery.default)(".treasurehunt-editor-loader").show(),(0,_str.getStrings)(stringQueried).then((strings=>{(0,_jquery.default)(".treasurehunt-editor-loader").hide(),function(intro,strings,keys){intro.setOptions({nextLabel:strings[keys.indexOf("nextstep")],prevLabel:strings[keys.indexOf("prevstep")],skipLabel:strings[keys.indexOf("skiptutorial")],doneLabel:strings[keys.indexOf("donetutorial")],steps:[{element:"#treasurehunt-editor",intro:strings[keys.indexOf("welcome_edit_tour")],position:"floating"},{element:"#mapedit",intro:strings[keys.indexOf("map_tour")],position:"floating"},{element:"#roadlist",intro:strings[keys.indexOf("roads_tour")],position:"top"},{element:"#stagelistpanel",intro:strings[keys.indexOf("stages_tour")],position:"right"},{element:"#addroad",intro:strings[keys.indexOf("addroad_tour")],position:"bottom"},{element:"#addstage",intro:strings[keys.indexOf("addstage_tour")],position:"bottom"},{element:"#savestage",intro:strings[keys.indexOf("save_tour")],position:"bottom"},{element:"#treasurehunt-editor",intro:strings[keys.indexOf("editend_tour")],position:"floating"}]}),intro.onexit((()=>{localStorage.setItem("introEditProgress","Done")})),intro.oncomplete((()=>{localStorage.setItem("introEditProgress","Done")}))}(intro,strings,terms),intro.start()})).catch(_notification.default.exception)},editpage:function(){(0,_jquery.default)("#edition_maintitle > h2 > a").on("click",this.launchedittutorial),0==this.onetimevisit("Edit",!1)&&this.launchedittutorial()},launchplaytutorial:function(){let intro=(0,_intro.default)(),terms=["nextstep","prevstep","skiptutorial","donetutorial","welcome_play_tour","lastsuccessfulstage_tour","mapplay_tour","validatelocation_tour","autolocate_tour","playend_tour"],stringQueried=terms.map((term=>({key:term,component:"treasurehunt"})));(0,_jquery.default)(".global-loader").addClass("active"),(0,_str.getStrings)(stringQueried).then((strings=>{(0,_jquery.default)(".global-loader").removeClass("active"),function(intro,strings,keys){intro.setOptions({nextLabel:strings[keys.indexOf("nextstep")],prevLabel:strings[keys.indexOf("prevstep")],skipLabel:strings[keys.indexOf("skiptutorial")],doneLabel:strings[keys.indexOf("donetutorial")],steps:[{intro:strings[keys.indexOf("welcome_play_tour")],position:"floating"},{element:"#cluebutton",intro:strings[keys.indexOf("lastsuccessfulstage_tour")],position:"top"},{element:"#mapplay",intro:strings[keys.indexOf("mapplay_tour")],position:"floating"},{element:"#validatelocation",intro:strings[keys.indexOf("validatelocation_tour")],position:"auto"},{element:"#autolocate",intro:strings[keys.indexOf("autolocate_tour")],position:"auto"},{element:"#treasurehunt-editor",intro:strings[keys.indexOf("playend_tour")],position:"floating"}]}),intro.onexit((()=>{localStorage.setItem("introPlayProgress","Done")})),intro.oncomplete((()=>{localStorage.setItem("introPlayProgress","Done")})),intro.onchange((()=>{localStorage.setItem("introPlayProgress","Done")})),intro.onafterchange((target=>{let parentElem=target.parentElement;for(;null!==parentElem;){if("panel"==parentElem.dataset.role){parentElem.style="z-index: 1001 !important";break}parentElem=parentElem.parentElement}}))}(intro,strings,terms),intro.start()})).catch(_notification.default.exception)},onetimevisit:function(name,clear){let cook=[];return document.cookie.split(";").forEach((x=>{var arr=x.split("=");arr[1]&&(cook[arr[0].trim()]=arr[1].trim())})),document.cookie=clear?"intro"+name+"Progress=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;":"intro"+name+"Progress=Done; path=/;","Done"===cook["intro"+name+"Progress"]},playpage:function(){(0,_jquery.default)("#playerhelp").on("click",this.launchplaytutorial),0==this.onetimevisit("Play",!1)&&this.launchplaytutorial()}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=tutorial_bootstrap.min.js.map